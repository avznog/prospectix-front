<div class="card card-bordered shadow-md border-solid border-current overflow-visible mb-3">
  <!-- Card -->
  <div class="card-body bg-opacity-10">
    <!-- Header card -->
    <div class="card-title w-full">

      <div class="space-x-4 w-2/3 inline-flex">
        <!-- Title -->
        <div class="w-2/3">{{prospect.companyName}} - {{prospect.activity.name}}</div>
       <div class="{{prospect.stage == 0 || prospect.stage == 1 ? 'w-full' : 'w-1/3'}} space-x-3">
         <!-- Button search google -->
         <div (click)="onClickButtonGoogle()" class="btn btn-sm btn-ghost btn-outline">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>

        <!-- Button MODAL Edit prospect -->
        <label for="modal-prospect-edit" class="btn btn-ghost btn-outline btn-sm modal-button">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
          </svg>
        </label>

        <input type="checkbox" id="modal-prospect-edit" class="modal-toggle" />
        <label for="modal-prospect-edit" class="modal cursor-pointer">
          <label class="modal-box relative max-w-screen-lg" for="">
            <app-prospect-edit [prospect]="prospect"></app-prospect-edit>
          </label>
        </label>

        <!-- Button Bookmark -->
        <div *ngIf="prospect.stage == 0 || prospect.stage == 1"
          class="btn btn-ghost btn-outline btn-sm {{prospect.isBookmarked ? 'bg-warning' : 'bg-error'}}"
          (click)="prospect.isBookmarked ? onDeleteBookmark() : onCreateBookmark()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="warning" stroke="currentColor">
            <path
              d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
        </div>

        <!-- Button history -->
        <label for="drawer-prospect-history" class="drawer-button btn btn-ghost btn-outline btn-sm"
          (click)="onClickDrawer()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
            stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </label>
      </div>
       </div>
      <div class="h-full w-1/2">

        <!-- Page mails -->
        <div *ngIf="sentEmail">
          Mail envoyé le {{sentEmail.sendingDate | date: "EEEE dd MMMM YYYY"}}
        </div>

        <!-- Page rappels -->
        <div *ngIf="reminder">
          <div class="rating">
            <input type="radio" name="rating-priority"
              class="mask mask-star-2 {{reminder.priority == 3 ? 'bg-accent' : reminder.priority == 2 ? 'bg-primary' : 'bg-secondary'}} "
              disabled>
            <input type="radio" name="rating-priority"
              class="mask mask-star-2 {{reminder.priority == 3 ? 'bg-accent' : reminder.priority == 2 ? 'bg-primary' : 'bg-secondary'}}"
              disabled *ngIf="reminder.priority != 1">
            <input type="radio" name="rating-priority"
              class="mask mask-star-2 {{reminder.priority == 3 ? 'bg-accent' : reminder.priority == 2 ? 'bg-primary' : 'bg-secondary'}}"
              disabled *ngIf="reminder.priority == 3">
          </div>
          Rappel défini au {{reminder.date | date: "EEEE dd MMMM YYYY"}} à {{reminder.date |date:"hh:mm:ss"}}
          <div class="tooltip" *ngIf="!reminder.done" data-tip="Rappel effectué" (click)="onMarkReminderDone()">

            <label class="btn btn-circle btn-success">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </label>
          </div>
        </div>

        <!-- Page rendez-vous -->
        <div *ngIf="meeting" class="space-x-5">
          <span class="badge badge-secondary">{{meeting.type}}</span>
          Rendez-vous le {{meeting.date | date:" EEEE dd MMMM YYYY"}}

          <div class="tooltip" *ngIf="!meeting.done" data-tip="Rendez-vous effectué" (click)="onMarkMeetingDone()">
            <label class="btn btn-circle btn-success">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </label>
          </div>

        </div>
      </div>
    </div>

    <!-- Address -->
    {{prospect.streetAddress}}, {{prospect.city.zipcode}}, {{prospect.city.name}}, {{prospect.country.name}}




    <div class="inline-flex space-x-5 ">

      <div class="btn-group">
        <!-- Phone -->
        <label class="btn btn-sm btn-outline" *ngIf="phone" (click)="onClickPhone()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-2/3" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50"
            fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" />
          </svg> {{phone}}</label>

        <!-- Mail -->
        <label class="btn btn-sm btn-outline" *ngIf="email" (click)="onClickEmail()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-2/3" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50"
            fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <rect x="3" y="5" width="18" height="14" rx="2" />
            <polyline points="3 7 12 13 21 7" />
          </svg> {{email}}</label>

        <!-- Website -->
        <label class="btn btn-sm btn-outline" *ngIf="website" (click)="onClickWebsite()">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-2/3" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50"
            fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <circle cx="10" cy="10" r="7" />
            <line x1="21" y1="21" x2="15" y2="15" />
          </svg> {{website}}</label>
      </div>
    </div>


    <div class="divider"></div>



    <!-- Buttons actions -->
    <div class="inline-flex space-x-3">

      <!-- Bouton Pas de réponse -->
      <button *ngIf="prospect.stage == 0 || prospect.stage == 1" (click)="onChangeNbNo()"
        class="btn btn-ghost btn-outline indicator">
        <span *ngIf="prospect.nbNo > 0" class="indicator-item badge">{{prospect.nbNo}}</span>Pas de réponse<span
          *ngIf="prospect.nbNo> 0">s</span>
      </button>

      <!-- Bouton de rappel  -->
      <div class="indicator" *ngIf="prospect.stage == 0 || prospect.stage == 1 || prospect.stage == 3">
        <span *ngIf="prospect.reminders.length > 0" class="indicator-item badge ">{{prospect.reminders.length}}</span>
        <label tabindex="0" class="btn btn-ghost btn-outline modal-button" for="modal-add-reminder-{{prospect.id}}">Rappel</label>

        <input type="checkbox" id="modal-add-reminder-{{prospect.id}}" class="modal-toggle" />
        <div class="modal">
          <div class="modal-box">
            <app-add-reminder-modal [prospect]="prospect"></app-add-reminder-modal>
          </div>
        </div>

      </div>
      <!-- Bouton de rendez-vous -->
      <div class="indicator" *ngIf="prospect.stage == 0 || prospect.stage == 1 || prospect.stage == 2 || prospect.stage == 4">
        <span *ngIf="prospect.meetings.length > 0" class="indicator-item badge ">{{prospect.meetings.length}}</span>
        <label tabindex="0" class="btn btn-ghost btn-outline modal-button" for="modal-add-meeting-{{prospect.id}}">Rendez-vous</label>

        <input type="checkbox" id="modal-add-meeting-{{prospect.id}}" class="modal-toggle" />
        <div class="modal">
          <div class="modal-box">
            <app-add-meetings-modal [prospect]="prospect"></app-add-meetings-modal>
          </div>
        </div>
      </div>

      <!-- Bouton Refus -->
      <button class="btn btn-ghost btn-outline" (click)="onClickRefus()">
        Refus
      </button>

      <!-- Bouton Mail -->
      <button class="btn btn-ghost btn-outline" (click)="onClickSentEmail()" *ngIf="prospect.stage != 4">
        Mail
      </button>

      <!-- Commentaire -->
      <div class="w-1/2">
        <textarea class="textarea textarea-bordered max-h-1.5 w-full" [(ngModel)]="comment"
          placeholder="Modifier le commentaire (autosave)" (change)="onChangeComment()">
              </textarea>
      </div>
    </div>
  </div>
</div>